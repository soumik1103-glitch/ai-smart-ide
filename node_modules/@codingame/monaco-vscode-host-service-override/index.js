
import { __decorate, __param } from '@codingame/monaco-vscode-api/external/tslib/tslib.es6';
import { mainWindow } from '@codingame/monaco-vscode-api/vscode/vs/base/browser/window';
import { IConfigurationService } from '@codingame/monaco-vscode-api/vscode/vs/platform/configuration/common/configuration.service';
import { IDialogService } from '@codingame/monaco-vscode-api/vscode/vs/platform/dialogs/common/dialogs.service';
import { IFileService } from '@codingame/monaco-vscode-api/vscode/vs/platform/files/common/files.service';
import { SyncDescriptor } from '@codingame/monaco-vscode-api/vscode/vs/platform/instantiation/common/descriptors';
import { IInstantiationService } from '@codingame/monaco-vscode-api/vscode/vs/platform/instantiation/common/instantiation';
import { ILabelService } from '@codingame/monaco-vscode-api/vscode/vs/platform/label/common/label.service';
import { ILayoutService } from '@codingame/monaco-vscode-api/vscode/vs/platform/layout/browser/layoutService.service';
import { ILogService } from '@codingame/monaco-vscode-api/vscode/vs/platform/log/common/log.service';
import { IUserDataProfilesService } from '@codingame/monaco-vscode-api/vscode/vs/platform/userDataProfile/common/userDataProfile.service';
import { IWorkspaceContextService } from '@codingame/monaco-vscode-api/vscode/vs/platform/workspace/common/workspace.service';
import { IBrowserWorkbenchEnvironmentService } from '@codingame/monaco-vscode-api/vscode/vs/workbench/services/environment/browser/environmentService.service';
import { BrowserHostService } from './vscode/src/vs/workbench/services/host/browser/browserHostService.js';
import { IHostService } from '@codingame/monaco-vscode-api/vscode/vs/workbench/services/host/browser/host.service';
import { ILifecycleService } from '@codingame/monaco-vscode-api/vscode/vs/workbench/services/lifecycle/common/lifecycle.service';
import { BrowserHostColorSchemeService } from './vscode/src/vs/workbench/services/themes/browser/browserHostColorSchemeService.js';
import { IHostColorSchemeService } from '@codingame/monaco-vscode-api/vscode/vs/workbench/services/themes/common/hostColorSchemeService.service';
import { Emitter } from '@codingame/monaco-vscode-api/vscode/vs/base/common/event';
import { getWindowId } from '@codingame/monaco-vscode-api/vscode/vs/base/browser/dom';

let CustomBrowserHostService = class CustomBrowserHostService extends BrowserHostService {
    constructor(_toggleFullScreen, _onDidChangeFullScreen, layoutService, configurationService, fileService, labelService, environmentService, instantiationService, lifecycleService, logService, dialogService, contextService, userDataProfilesService) {
        super(layoutService, configurationService, fileService, labelService, environmentService, instantiationService, lifecycleService, logService, dialogService, contextService, userDataProfilesService);
        this._toggleFullScreen = _toggleFullScreen;
        this._onDidChangeFullScreen = (() => {
            const mainWindowId = getWindowId(mainWindow);
            const emitter = new Emitter();
            _onDidChangeFullScreen?.((fullscreen) => {
                emitter.fire({
                    windowId: mainWindowId,
                    fullscreen
                });
            });
            super.onDidChangeFullScreen((event) => {
                if (_onDidChangeFullScreen == null || event.windowId !== mainWindowId) {
                    emitter.fire(event);
                }
            });
            return emitter.event;
        })();
    }
    async toggleFullScreen(targetWindow) {
        if (this._toggleFullScreen != null && targetWindow === mainWindow) {
            await this._toggleFullScreen();
        }
        else {
            await super.toggleFullScreen(targetWindow);
        }
    }
    get onDidChangeFullScreen() {
        return this._onDidChangeFullScreen;
    }
};
CustomBrowserHostService = __decorate([
    __param(2, ILayoutService),
    __param(3, IConfigurationService),
    __param(4, IFileService),
    __param(5, ILabelService),
    __param(6, IBrowserWorkbenchEnvironmentService),
    __param(7, IInstantiationService),
    __param(8, ILifecycleService),
    __param(9, ILogService),
    __param(10, IDialogService),
    __param(11, IWorkspaceContextService),
    __param(12, IUserDataProfilesService)
], CustomBrowserHostService);
function getServiceOverride({ toggleFullScreen, onDidChangeFullScreen } = {}) {
    return {
        [IHostService.toString()]: new SyncDescriptor(CustomBrowserHostService, [toggleFullScreen, onDidChangeFullScreen], true),
        [IHostColorSchemeService.toString()]: new SyncDescriptor(BrowserHostColorSchemeService, [], true)
    };
}

export { getServiceOverride as default };
