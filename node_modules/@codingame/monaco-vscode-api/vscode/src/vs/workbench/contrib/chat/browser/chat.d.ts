import { IMouseWheelEvent } from "../../../../base/browser/mouseEvent.js";
import { Event } from "../../../../base/common/event.js";
import { URI } from "../../../../base/common/uri.js";
import { ICodeEditor } from "../../../../editor/browser/editorBrowser.js";
import { Selection } from "../../../../editor/common/core/selection.js";
import { EditDeltaInfo } from "../../../../editor/common/textModelEditSource.js";
import { MenuId } from "../../../../platform/actions/common/actions.js";
import { IContextKeyService } from "../../../../platform/contextkey/common/contextkey.service.js";
import { IChatAgentAttachmentCapabilities, IChatAgentCommand, IChatAgentData } from "../common/participants/chatAgents.js";
import { IChatResponseModel, IChatModelInputState } from "../common/model/chatModel.js";
import { IChatMode } from "../common/chatModes.js";
import { IParsedChatRequest } from "../common/requestParser/chatParserTypes.js";
import { IChatLocationData, IChatSendRequestOptions } from "../common/chatService/chatService.js";
import { IChatRequestViewModel, IChatResponseViewModel, IChatViewModel } from "../common/model/chatViewModel.js";
import { ChatAgentLocation, ChatModeKind } from "../common/constants.js";
import { ChatAttachmentModel } from "@codingame/monaco-vscode-katex-common/vscode/vs/workbench/contrib/chat/browser/attachments/chatAttachmentModel";
import { ChatInputPart } from "@codingame/monaco-vscode-katex-common/vscode/vs/workbench/contrib/chat/browser/widget/input/chatInputPart";
import { IChatWidgetContrib } from "@codingame/monaco-vscode-katex-common/vscode/vs/workbench/contrib/chat/browser/widget/chatWidget";
import { ICodeBlockActionContext } from "@codingame/monaco-vscode-katex-common/vscode/vs/workbench/contrib/chat/browser/widget/chatContentParts/codeBlockPart";
export declare const ChatViewPaneTarget: unique symbol;
export interface IQuickChatOpenOptions {
    /**
     * The query for quick chat.
     */
    query: string;
    /**
     * Whether the query is partial and will await more input from the user.
     */
    isPartialQuery?: boolean;
    /**
     * An optional selection range to apply to the query text box.
     */
    selection?: Selection;
}
export interface IChatCodeBlockInfo {
    readonly ownerMarkdownPartId: string;
    readonly codeBlockIndex: number;
    readonly elementId: string;
    readonly uri: URI | undefined;
    readonly uriPromise: Promise<URI | undefined>;
    codemapperUri: URI | undefined;
    readonly chatSessionResource: URI | undefined;
    focus(): void;
    readonly languageId?: string | undefined;
    readonly editDeltaInfo?: EditDeltaInfo | undefined;
}
export interface IChatFileTreeInfo {
    treeDataId: string;
    treeIndex: number;
    focus(): void;
}
export type ChatTreeItem = IChatRequestViewModel | IChatResponseViewModel;
export interface IChatListItemRendererOptions {
    readonly renderStyle?: "compact" | "minimal";
    readonly noHeader?: boolean;
    readonly noFooter?: boolean;
    readonly editableCodeBlock?: boolean;
    readonly renderDetectedCommandsWithRequest?: boolean;
    readonly restorable?: boolean;
    readonly editable?: boolean;
    readonly renderTextEditsAsSummary?: (uri: URI) => boolean;
    readonly referencesExpandedWhenEmptyResponse?: boolean | ((mode: ChatModeKind) => boolean);
    readonly progressMessageAtBottomOfResponse?: boolean | ((mode: ChatModeKind) => boolean);
}
export interface IChatWidgetViewOptions {
    autoScroll?: boolean | ((mode: ChatModeKind) => boolean);
    renderInputOnTop?: boolean;
    renderFollowups?: boolean;
    renderStyle?: "compact" | "minimal";
    renderInputToolbarBelowInput?: boolean;
    supportsFileReferences?: boolean;
    filter?: (item: ChatTreeItem) => boolean;
    /** Action triggered when 'clear' is called on the widget. */
    clear?: () => Promise<void>;
    rendererOptions?: IChatListItemRendererOptions;
    menus?: {
        /**
         * The menu that is inside the input editor, use for send, dictation
         */
        executeToolbar?: MenuId;
        /**
         * The menu that next to the input editor, use for close, config etc
         */
        inputSideToolbar?: MenuId;
        /**
         * The telemetry source for all commands of this widget
         */
        telemetrySource?: string;
    };
    defaultElementHeight?: number;
    editorOverflowWidgetsDomNode?: HTMLElement;
    enableImplicitContext?: boolean;
    enableWorkingSet?: "explicit" | "implicit";
    supportsChangingModes?: boolean;
    dndContainer?: HTMLElement;
    defaultMode?: IChatMode;
}
export interface IChatViewViewContext {
    viewId: string;
}
export declare function isIChatViewViewContext(context: IChatWidgetViewContext): context is IChatViewViewContext;
export interface IChatResourceViewContext {
    isQuickChat?: boolean;
    isInlineChat?: boolean;
}
export declare function isIChatResourceViewContext(context: IChatWidgetViewContext): context is IChatResourceViewContext;
export type IChatWidgetViewContext = IChatViewViewContext | IChatResourceViewContext | {};
export interface IChatAcceptInputOptions {
    noCommandDetection?: boolean;
    isVoiceInput?: boolean;
    enableImplicitContext?: boolean;
    storeToHistory?: boolean;
}
export interface IChatWidgetViewModelChangeEvent {
    readonly previousSessionResource: URI | undefined;
    readonly currentSessionResource: URI | undefined;
}
export interface IChatWidget {
    readonly domNode: HTMLElement;
    readonly onDidChangeViewModel: Event<IChatWidgetViewModelChangeEvent>;
    readonly onDidAcceptInput: Event<void>;
    readonly onDidHide: Event<void>;
    readonly onDidShow: Event<void>;
    readonly onDidSubmitAgent: Event<{
        agent: IChatAgentData;
        slashCommand?: IChatAgentCommand;
    }>;
    readonly onDidChangeAgent: Event<{
        agent: IChatAgentData;
        slashCommand?: IChatAgentCommand;
    }>;
    readonly onDidChangeParsedInput: Event<void>;
    readonly onDidFocus: Event<void>;
    readonly location: ChatAgentLocation;
    readonly viewContext: IChatWidgetViewContext;
    readonly viewModel: IChatViewModel | undefined;
    readonly inputEditor: ICodeEditor;
    readonly supportsFileReferences: boolean;
    readonly attachmentCapabilities: IChatAgentAttachmentCapabilities;
    readonly parsedInput: IParsedChatRequest;
    readonly lockedAgentId: string | undefined;
    lastSelectedAgent: IChatAgentData | undefined;
    readonly scopedContextKeyService: IContextKeyService;
    readonly input: ChatInputPart;
    readonly attachmentModel: ChatAttachmentModel;
    readonly locationData?: IChatLocationData;
    readonly contribs: readonly IChatWidgetContrib[];
    readonly supportsChangingModes: boolean;
    getContrib<T extends IChatWidgetContrib>(id: string): T | undefined;
    reveal(item: ChatTreeItem): void;
    focus(item: ChatTreeItem): void;
    getSibling(item: ChatTreeItem, type: "next" | "previous"): ChatTreeItem | undefined;
    getFocus(): ChatTreeItem | undefined;
    setInput(query?: string): void;
    getInput(): string;
    refreshParsedInput(): void;
    logInputHistory(): void;
    acceptInput(query?: string, options?: IChatAcceptInputOptions): Promise<IChatResponseModel | undefined>;
    startEditing(requestId: string): void;
    finishedEditing(completedEdit?: boolean): void;
    rerunLastRequest(): Promise<void>;
    setInputPlaceholder(placeholder: string): void;
    resetInputPlaceholder(): void;
    /**
     * Focuses the response item in the list.
     * @param lastFocused Focuses the most recently focused response. Otherwise, focuses the last response.
     */
    focusResponseItem(lastFocused?: boolean): void;
    focusInput(): void;
    hasInputFocus(): boolean;
    getModeRequestOptions(): Partial<IChatSendRequestOptions>;
    getCodeBlockInfoForEditor(uri: URI): IChatCodeBlockInfo | undefined;
    getCodeBlockInfosForResponse(response: IChatResponseViewModel): IChatCodeBlockInfo[];
    getFileTreeInfosForResponse(response: IChatResponseViewModel): IChatFileTreeInfo[];
    getLastFocusedFileTreeForResponse(response: IChatResponseViewModel): IChatFileTreeInfo | undefined;
    clear(): Promise<void>;
    getViewState(): IChatModelInputState | undefined;
    lockToCodingAgent(name: string, displayName: string, agentId?: string): void;
    handleDelegationExitIfNeeded(sourceAgent: Pick<IChatAgentData, "id" | "name"> | undefined, targetAgent: IChatAgentData | undefined): Promise<void>;
    delegateScrollFromMouseWheelEvent(event: IMouseWheelEvent): void;
}
export interface ICodeBlockActionContextProvider {
    getCodeBlockContext(editor?: ICodeEditor): ICodeBlockActionContext | undefined;
}
export declare const ChatViewId = "workbench.panel.chat.view.copilot";
export declare const ChatViewContainerId = "workbench.panel.chat";
