import { CancellationToken } from "../../../../../../base/common/cancellation.js";
import { Event } from "../../../../../../base/common/event.js";
import { IDisposable } from "../../../../../../base/common/lifecycle.js";
import { ResourceSet } from "../../../../../../base/common/map.js";
import { URI } from "../../../../../../base/common/uri.js";
import { ITextModel } from "../../../../../../editor/common/model.js";
import { IExtensionDescription } from "../../../../../../platform/extensions/common/extensions.js";
import { ParsedPromptFile } from "../promptFileParser.js";
import { PromptsType } from "../promptTypes.js";
import { IPromptPath, PromptsStorage, IChatPromptSlashCommand, ICustomAgent, ICustomAgentQueryOptions, IExternalCustomAgent, IAgentSkill } from "./promptsService.js";
/**
* Provides prompt services.
*/
export declare const IPromptsService: import("../../../../../../platform/instantiation/common/instantiation.js").ServiceIdentifier<IPromptsService>;
/**
* Provides prompt services.
*/
export interface IPromptsService extends IDisposable {
    readonly _serviceBrand: undefined;
    /**
    * The parsed prompt file for the provided text model.
    * @param textModel Returns the parsed prompt file.
    */
    getParsedPromptFile(textModel: ITextModel): ParsedPromptFile;
    /**
    * List all available prompt files.
    */
    listPromptFiles(type: PromptsType, token: CancellationToken): Promise<readonly IPromptPath[]>;
    /**
    * List all available prompt files.
    */
    listPromptFilesForStorage(type: PromptsType, storage: PromptsStorage, token: CancellationToken): Promise<readonly IPromptPath[]>;
    /**
    * Get a list of prompt source folders based on the provided prompt type.
    */
    getSourceFolders(type: PromptsType): readonly IPromptPath[];
    /**
    * Validates if the provided command name is a valid prompt slash command.
    */
    isValidSlashCommandName(name: string): boolean;
    /**
    * Gets the prompt file for a slash command.
    */
    resolvePromptSlashCommand(command: string, token: CancellationToken): Promise<IChatPromptSlashCommand | undefined>;
    /**
    * Event that is triggered when the slash command to ParsedPromptFile cache is updated.
    * Event handlers can use {@link resolvePromptSlashCommand} to retrieve the latest data.
    */
    readonly onDidChangeSlashCommands: Event<void>;
    /**
    * Returns a prompt command if the command name is valid.
    */
    getPromptSlashCommands(token: CancellationToken): Promise<readonly IChatPromptSlashCommand[]>;
    /**
    * Returns the prompt command name for the given URI.
    */
    getPromptSlashCommandName(uri: URI, token: CancellationToken): Promise<string>;
    /**
    * Event that is triggered when the list of custom agents changes.
    */
    readonly onDidChangeCustomAgents: Event<void>;
    /**
    * Finds all available custom agents
    */
    getCustomAgents(token: CancellationToken): Promise<readonly ICustomAgent[]>;
    /**
    * Parses the provided URI
    * @param uris
    */
    parseNew(uri: URI, token: CancellationToken): Promise<ParsedPromptFile>;
    /**
    * Internal: register a contributed file. Returns a disposable that removes the contribution.
    * Not intended for extension authors; used by contribution point handler.
    */
    registerContributedFile(type: PromptsType, uri: URI, extension: IExtensionDescription, name: string | undefined, description: string | undefined): IDisposable;
    getPromptLocationLabel(promptPath: IPromptPath): string;
    /**
    * Gets list of all AGENTS.md files in the workspace.
    */
    findAgentMDsInWorkspace(token: CancellationToken): Promise<URI[]>;
    /**
    * Gets list of AGENTS.md files.
    * @param includeNested Whether to include AGENTS.md files from subfolders, or only from the root.
    */
    listAgentMDs(token: CancellationToken, includeNested: boolean): Promise<URI[]>;
    /**
    * Gets list of .github/copilot-instructions.md files.
    */
    listCopilotInstructionsMDs(token: CancellationToken): Promise<URI[]>;
    /**
    * For a chat mode file URI, return the name of the agent file that it should use.
    * @param oldURI
    */
    getAgentFileURIFromModeFile(oldURI: URI): URI | undefined;
    /**
    * Returns the list of disabled prompt file URIs for a given type. By default no prompt files are disabled.
    */
    getDisabledPromptFiles(type: PromptsType): ResourceSet;
    /**
    * Persists the set of disabled prompt file URIs for the given type.
    */
    setDisabledPromptFiles(type: PromptsType, uris: ResourceSet): void;
    /**
    * Registers a CustomAgentsProvider that can provide custom agents for repositories.
    * This is part of the proposed API and requires the chatParticipantPrivate proposal.
    * @param extension The extension registering the provider.
    * @param provider The provider implementation with optional change event.
    * @returns A disposable that unregisters the provider when disposed.
    */
    registerCustomAgentsProvider(extension: IExtensionDescription, provider: {
        onDidChangeCustomAgents?: Event<void>;
        provideCustomAgents: (options: ICustomAgentQueryOptions, token: CancellationToken) => Promise<IExternalCustomAgent[] | undefined>;
    }): IDisposable;
    /**
    * Gets list of agent skills files.
    */
    findAgentSkills(token: CancellationToken): Promise<IAgentSkill[] | undefined>;
}
