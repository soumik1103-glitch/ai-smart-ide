import { URI } from "@codingame/monaco-vscode-api/vscode/vs/base/common/uri";
import { LanguageId } from "@codingame/monaco-vscode-api/vscode/vs/editor/common/encodedTokenAttributes";
import { IModelChangedEvent, MirrorTextModel } from "@codingame/monaco-vscode-api/vscode/vs/editor/common/model/mirrorTextModel";
import { ICreateGrammarResult } from "../../../common/TMGrammarFactory.js";
import { StateDeltas } from "./textMateTokenizationWorker.worker.js";
import { IFontTokenOption } from "@codingame/monaco-vscode-api/vscode/vs/editor/common/textModelEvents";
import { ISerializedAnnotation } from "@codingame/monaco-vscode-api/vscode/vs/editor/common/model/tokens/annotations";
export interface TextMateModelTokenizerHost {
    getOrCreateGrammar(languageId: string, encodedLanguageId: LanguageId): Promise<ICreateGrammarResult | null>;
    setTokensAndStates(versionId: number, tokens: Uint8Array, fontTokens: ISerializedAnnotation<IFontTokenOption>[], stateDeltas: StateDeltas[]): void;
    reportTokenizationTime(timeMs: number, languageId: string, sourceExtensionId: string | undefined, lineLength: number, isRandomSample: boolean): void;
}
export declare class TextMateWorkerTokenizer extends MirrorTextModel {
    private readonly _host;
    private _languageId;
    private _encodedLanguageId;
    private _tokenizerWithStateStore;
    private _isDisposed;
    private readonly _maxTokenizationLineLength;
    private _diffStateStacksRefEqFn?;
    private readonly _tokenizeDebouncer;
    constructor(uri: URI, lines: string[], eol: string, versionId: number, _host: TextMateModelTokenizerHost, _languageId: string, _encodedLanguageId: LanguageId, maxTokenizationLineLength: number);
    dispose(): void;
    onLanguageId(languageId: string, encodedLanguageId: LanguageId): void;
    onEvents(e: IModelChangedEvent): void;
    acceptMaxTokenizationLineLength(maxTokenizationLineLength: number): void;
    retokenize(startLineNumber: number, endLineNumberExclusive: number): void;
    private _resetTokenization;
    private _tokenize;
    private _getFontTokensUpdate;
    private _getOffsetAtLineStart;
}
