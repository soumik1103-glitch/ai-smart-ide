import { IDisposable } from "@codingame/monaco-vscode-api/vscode/vs/base/common/lifecycle";
import { IObservable } from "@codingame/monaco-vscode-api/vscode/vs/base/common/observable";
import { IBackgroundTokenizationStore, IBackgroundTokenizer } from "@codingame/monaco-vscode-api/vscode/vs/editor/common/languages";
import { ILanguageService } from "@codingame/monaco-vscode-api/vscode/vs/editor/common/languages/language.service";
import { ITextModel } from "@codingame/monaco-vscode-api/vscode/vs/editor/common/model";
import { IConfigurationService } from "@codingame/monaco-vscode-api/vscode/vs/platform/configuration/common/configuration.service";
import { IExtensionResourceLoaderService } from "@codingame/monaco-vscode-api/vscode/vs/platform/extensionResourceLoader/common/extensionResourceLoader.service";
import { INotificationService } from "@codingame/monaco-vscode-api/vscode/vs/platform/notification/common/notification.service";
import { ITelemetryService } from "@codingame/monaco-vscode-api/vscode/vs/platform/telemetry/common/telemetry.service";
import { IValidGrammarDefinition } from "../../common/TMScopeRegistry.js";
import type { IRawTheme } from "@codingame/monaco-vscode-api/_virtual/main";
import { IWebWorkerService } from "@codingame/monaco-vscode-api/vscode/vs/platform/webWorker/browser/webWorkerService.service";
export declare class ThreadedBackgroundTokenizerFactory implements IDisposable {
    private readonly _reportTokenizationTime;
    private readonly _shouldTokenizeAsync;
    private readonly _extensionResourceLoaderService;
    private readonly _configurationService;
    private readonly _languageService;
    private readonly _notificationService;
    private readonly _telemetryService;
    private readonly _webWorkerService;
    private static _reportedMismatchingTokens;
    private _workerProxyPromise;
    private _worker;
    private _workerProxy;
    private readonly _workerTokenizerControllers;
    private _currentTheme;
    private _currentTokenColorMap;
    private _grammarDefinitions;
    constructor(_reportTokenizationTime: (timeMs: number, languageId: string, sourceExtensionId: string | undefined, lineLength: number, isRandomSample: boolean) => void, _shouldTokenizeAsync: () => boolean, _extensionResourceLoaderService: IExtensionResourceLoaderService, _configurationService: IConfigurationService, _languageService: ILanguageService, _notificationService: INotificationService, _telemetryService: ITelemetryService, _webWorkerService: IWebWorkerService);
    dispose(): void;
    createBackgroundTokenizer(textModel: ITextModel, tokenStore: IBackgroundTokenizationStore, maxTokenizationLineLength: IObservable<number>): IBackgroundTokenizer | undefined;
    setGrammarDefinitions(grammarDefinitions: IValidGrammarDefinition[]): void;
    acceptTheme(theme: IRawTheme, colorMap: string[]): void;
    private _getWorkerProxy;
    private _createWorkerProxy;
    private _disposeWorker;
}
