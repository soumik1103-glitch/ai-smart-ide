import { Disposable } from "@codingame/monaco-vscode-api/vscode/vs/base/common/lifecycle";
import { IObservable } from "@codingame/monaco-vscode-api/vscode/vs/base/common/observable";
import { Proxied } from "@codingame/monaco-vscode-api/vscode/vs/base/common/worker/webWorker";
import { IBackgroundTokenizationStore, ILanguageIdCodec } from "@codingame/monaco-vscode-api/vscode/vs/editor/common/languages";
import { ITextModel } from "@codingame/monaco-vscode-api/vscode/vs/editor/common/model";
import { IFontTokenOption } from "@codingame/monaco-vscode-api/vscode/vs/editor/common/textModelEvents";
import { IConfigurationService } from "@codingame/monaco-vscode-api/vscode/vs/platform/configuration/common/configuration.service";
import type { StateDeltas, TextMateTokenizationWorker } from "./worker/textMateTokenizationWorker.worker.js";
import { ISerializedAnnotation } from "@codingame/monaco-vscode-api/vscode/vs/editor/common/model/tokens/annotations";
export declare class TextMateWorkerTokenizerController extends Disposable {
    private readonly _model;
    private readonly _worker;
    private readonly _languageIdCodec;
    private readonly _backgroundTokenizationStore;
    private readonly _configurationService;
    private readonly _maxTokenizationLineLength;
    private static _id;
    readonly controllerId: number;
    private readonly _pendingChanges;
    /**
     * These states will eventually equal the worker states.
     * _states[i] stores the state at the end of line number i+1.
     */
    private readonly _states;
    private readonly _loggingEnabled;
    private _applyStateStackDiffFn?;
    private _initialState?;
    constructor(_model: ITextModel, _worker: Proxied<TextMateTokenizationWorker>, _languageIdCodec: ILanguageIdCodec, _backgroundTokenizationStore: IBackgroundTokenizationStore, _configurationService: IConfigurationService, _maxTokenizationLineLength: IObservable<number>);
    dispose(): void;
    requestTokens(startLineNumber: number, endLineNumberExclusive: number): void;
    /**
     * This method is called from the worker through the worker host.
     */
    setTokensAndStates(controllerId: number, versionId: number, rawTokens: Uint8Array, fontTokens: ISerializedAnnotation<IFontTokenOption>[], stateDeltas: StateDeltas[]): Promise<void>;
    private _stringEditFromChanges;
    private get _shouldLog();
}
